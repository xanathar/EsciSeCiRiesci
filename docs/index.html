<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="/EsciSeCiRiesci/web/icona_96.png">
    <title>Esci se ci riesci!</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <script src="TemplateData/UnityProgress.js"></script>  
    <script src="Build/UnityLoader.js"></script>
    <script>
        function startAudioOnClick() {
            window.AudioContext = window.AudioContext || window.webkitAudioContext;
            var bind = Function.bind;
            var unbind = bind.bind(bind);

            function instantiate(constructor, args) {
                return new (unbind(constructor, null).apply(null, args));
            }

            window.AudioContext = function (AudioContext) {
                return function () {
                    var audioContext = instantiate(AudioContext, arguments);
                    window.myAudioContext = audioContext;
                    console.log('AudioContext has been instantiated!');
                    return audioContext;
                }
            }(AudioContext);

            var webAudioEnabled = false;

            function resumeAudio(){
                if (!webAudioEnabled && window.myAudioContext){
                    console.log('SIMMER starting Audio!');
                    window.myAudioContext.resume();
                    webAudioEnabled = true;
                }
            }

            document.body.addEventListener('click', resumeAudio, true);
            document.addEventListener('keydown', resumeAudio, true);
            var gameInstance = UnityLoader.instantiate("gameContainer", "Build/WebGL.json", {onProgress: UnityProgress});
        }
    </script>
  </head>
  <body>
    <div class="webgl-content">
      <div id="gameContainer" style="width: 960px; height: 600px"></div>
      <div class="footer">
        <!--div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div-->
        <div class="fullscreen" onclick="startAudioOnClick()"></div>
        <div class="title">v3 Esci se ci riesci!</div>
      </div>
    </div>
  </body>
</html>